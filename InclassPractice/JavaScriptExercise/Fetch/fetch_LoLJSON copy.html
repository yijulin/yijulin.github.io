<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>Hello, world!</title>
</head>

<body>
    <div id="championsCarousel" class="carousel slide" data-bs-ride="carousel">
        <ol class="carousel-indicators">

        </ol>
        <div class="carousel-inner">

        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#championsCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#championsCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>


    <script type="module">
        import { qselect, create } from "../../../helpers.js"

        const url = "https://ddragon.leagueoflegends.com/cdn/10.22.1/data/zh_TW/champion.json";
        let LOLdata = [];
        window.onload = () => {
            fetch(url)
                .then(response => response.json())
                .then(result => {
                    LOLdata = Object.values(result.data);
                    setCarousel();
                    console.log(LOLdata);
                })
                .catch(ex => {
                    console.log(ex);
                })
                .finally(() => {
                    document.querySelector('#championsCarousel').style.visibility = 'visibile';
                })
                ;

        }

        function setCarousel() {

            let ol = qselect("ol");
            let div = qselect(".carousel-inner");

            LOLdata.forEach((item, index) => {
                let li = create("li");
                li.setAttribute('data-bs-target', "#championsCarousel");
                li.setAttribute('data-bs-slide-to', `${index}`);
                if (index == 0) {
                    li.setAttribute('class', "active");
                }
                ol.appendChild(li);

                let active_div = create("div");
                active_div.setAttribute('class', 'carousel-item vh-100');
                if (index == 0) {
                    active_div.setAttribute('class', 'carousel-item vh-100 active');
                }

                let imgurl = "https://ddragon.leagueoflegends.com/cdn/img/champion/splash/";
                let img = create("img");
                img.setAttribute('class', 'd-block w-100 ');
                img.setAttribute('dara-interval', '3000');
                img.setAttribute('src', `${imgurl}${item.id}_0.jpg`);
                active_div.appendChild(img);

                let box_div = create("div");
                box_div.setAttribute('class', 'carousel-caption d-none d-md-block');
                let h5 = create("h5");
                h5.innerText = `${item.id} - ${item.name}`
                box_div.appendChild(h5);
                let p = create("p");
                p.innerText = item.blurb;
                box_div.appendChild(p);

                active_div.appendChild(box_div);
                div.appendChild(active_div);

            });

        }

    </script>
</body>

</html>